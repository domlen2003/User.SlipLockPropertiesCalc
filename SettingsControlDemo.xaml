<UserControl x:Class="DDFRacerPlugin.SettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:styles="clr-namespace:SimHub.Plugins.Styles;assembly=SimHub.Plugins"
             mc:Ignorable="d">
    <ScrollViewer>
        <Grid>
            <styles:SHSection Title="DDF RACER PLUGIN - REAL-TIME VALUES" ShowSeparator="True">
                <StackPanel>

                    <!-- Max Values Section -->
                    <styles:SHSubSection Title="Maximum G-Force Values (Session)">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="30"/>
                            </Grid.RowDefinitions>

                            <Label Grid.Row="0" Grid.Column="0" FontWeight="Bold">Max Sway (Lateral G):</Label>
                            <Label Grid.Row="0" Grid.Column="1" Content="{Binding MaxSway, StringFormat='{}{0:F3} G'}" FontFamily="Consolas" FontSize="14"/>

                            <Label Grid.Row="1" Grid.Column="0" FontWeight="Bold">Max Surge (Accel G):</Label>
                            <Label Grid.Row="1" Grid.Column="1" Content="{Binding MaxSurge, StringFormat='{}{0:F3} G'}" FontFamily="Consolas" FontSize="14"/>

                            <Label Grid.Row="2" Grid.Column="0" FontWeight="Bold">Max Decel (Brake G):</Label>
                            <Label Grid.Row="2" Grid.Column="1" Content="{Binding MaxDecel, StringFormat='{}{0:F3} G'}" FontFamily="Consolas" FontSize="14"/>
                        </Grid>
                    </styles:SHSubSection>

                    <styles:SHSectionSeparator />

                    <!-- SWAY * THROTTLE Section -->
                    <styles:SHSubSection Title="SWAY * THROTTLE % MIXED HALF">
                        <Grid Margin="20,10,20,10" HorizontalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="80"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="80"/>
                                <RowDefinition Height="30"/>
                            </Grid.RowDefinitions>

                            <!-- Front Row Label -->
                            <Label Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Content="FRONT" 
                                   HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                            <!-- Front Left -->
                            <Grid Grid.Row="1" Grid.Column="0">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SwayThrottleFL}" />
                                <Label Content="{Binding SwayThrottleFL, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="2" Grid.Column="0" Content="Front Left" HorizontalAlignment="Center" FontWeight="Bold"/>

                            <!-- Front Right -->
                            <Grid Grid.Row="1" Grid.Column="2">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SwayThrottleFR}" />
                                <Label Content="{Binding SwayThrottleFR, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="2" Grid.Column="2" Content="Front Right" HorizontalAlignment="Center" FontWeight="Bold"/>

                            <!-- Rear Row Label -->
                            <Label Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" Content="REAR" 
                                   HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,20,0,5"/>

                            <!-- Rear Left -->
                            <Grid Grid.Row="4" Grid.Column="0">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SwayThrottleRL}" />
                                <Label Content="{Binding SwayThrottleRL, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="5" Grid.Column="0" Content="Rear Left" HorizontalAlignment="Center" FontWeight="Bold"/>

                            <!-- Rear Right -->
                            <Grid Grid.Row="4" Grid.Column="2">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SwayThrottleRR}" />
                                <Label Content="{Binding SwayThrottleRR, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="5" Grid.Column="2" Content="Rear Right" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </Grid>
                    </styles:SHSubSection>

                    <styles:SHSectionSeparator />

                    <!-- SURGE * THROTTLE Section -->
                    <styles:SHSubSection Title="SURGE * THROTTLE % MIXED HALF">
                        <Grid Margin="20,10,20,10" HorizontalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="80"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="80"/>
                                <RowDefinition Height="30"/>
                            </Grid.RowDefinitions>

                            <!-- Front Row Label -->
                            <Label Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Content="FRONT" 
                                   HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                            <!-- Front Left -->
                            <Grid Grid.Row="1" Grid.Column="0">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SurgeThrottleFL}" />
                                <Label Content="{Binding SurgeThrottleFL, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="2" Grid.Column="0" Content="Front Left" HorizontalAlignment="Center" FontWeight="Bold"/>

                            <!-- Front Right -->
                            <Grid Grid.Row="1" Grid.Column="2">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SurgeThrottleFR}" />
                                <Label Content="{Binding SurgeThrottleFR, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="2" Grid.Column="2" Content="Front Right" HorizontalAlignment="Center" FontWeight="Bold"/>

                            <!-- Rear Row Label -->
                            <Label Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" Content="REAR" 
                                   HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,20,0,5"/>

                            <!-- Rear Left -->
                            <Grid Grid.Row="4" Grid.Column="0">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SurgeThrottleRL}" />
                                <Label Content="{Binding SurgeThrottleRL, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="5" Grid.Column="0" Content="Rear Left" HorizontalAlignment="Center" FontWeight="Bold"/>

                            <!-- Rear Right -->
                            <Grid Grid.Row="4" Grid.Column="2">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SurgeThrottleRR}" />
                                <Label Content="{Binding SurgeThrottleRR, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="5" Grid.Column="2" Content="Rear Right" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </Grid>
                    </styles:SHSubSection>

                    <styles:SHSectionSeparator />

                    <!-- SLIP * BRAKE Section -->
                    <styles:SHSubSection Title="SLIP * SURGE (BRAKES ONLY)">
                        <Grid Margin="20,10,20,10" HorizontalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="80"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="80"/>
                                <RowDefinition Height="30"/>
                            </Grid.RowDefinitions>

                            <!-- Front Row Label -->
                            <Label Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Content="FRONT" 
                                   HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                            <!-- Front Left -->
                            <Grid Grid.Row="1" Grid.Column="0">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SlipBrakeFL}" />
                                <Label Content="{Binding SlipBrakeFL, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="2" Grid.Column="0" Content="Front Left" HorizontalAlignment="Center" FontWeight="Bold"/>

                            <!-- Front Right -->
                            <Grid Grid.Row="1" Grid.Column="2">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SlipBrakeFR}" />
                                <Label Content="{Binding SlipBrakeFR, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="2" Grid.Column="2" Content="Front Right" HorizontalAlignment="Center" FontWeight="Bold"/>

                            <!-- Rear Row Label -->
                            <Label Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" Content="REAR" 
                                   HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,20,0,5"/>

                            <!-- Rear Left -->
                            <Grid Grid.Row="4" Grid.Column="0">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SlipBrakeRL}" />
                                <Label Content="{Binding SlipBrakeRL, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="5" Grid.Column="0" Content="Rear Left" HorizontalAlignment="Center" FontWeight="Bold"/>

                            <!-- Rear Right -->
                            <Grid Grid.Row="4" Grid.Column="2">
                                <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="0" Maximum="100" Value="{Binding SlipBrakeRR}" />
                                <Label Content="{Binding SlipBrakeRR, StringFormat='{}{0:F3}'}" 
                                       FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <Label Grid.Row="5" Grid.Column="2" Content="Rear Right" HorizontalAlignment="Center" FontWeight="Bold"/>
                        </Grid>
                    </styles:SHSubSection>

                    <styles:SHSectionSeparator />

                    <!-- ABS * BRAKE Section -->
                    <styles:SHSubSection Title="ABS * BRAKE %">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30"/>
                            </Grid.RowDefinitions>

                            <Label Grid.Row="0" Grid.Column="0" FontWeight="Bold">ABS Brake:</Label>
                            <ProgressBar Grid.Row="0" Grid.Column="1" Height="20" Minimum="0" Maximum="100" Value="{Binding ABSBrake}" />
                            <Label Grid.Row="0" Grid.Column="1" Content="{Binding ABSBrake, StringFormat='{}{0:F2}'}" 
                                   FontFamily="Consolas" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                    </styles:SHSubSection>

                    <styles:SHSectionSeparator />

                    <!-- WHEEL SLIP COMPARISON Section -->
                    <styles:SHSubSection Title="WHEEL SLIP COMPARISON (iRacing)">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- LEFT: ShakeIT Raw Slip -->
                            <StackPanel Grid.Column="0">
                                <Label Content="ShakeIT Raw Slip" HorizontalAlignment="Center" FontWeight="Bold" FontSize="16" Margin="0,0,0,10"/>

                                <Grid HorizontalAlignment="Center">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="40"/>
                                        <ColumnDefinition Width="120"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="80"/>
                                        <RowDefinition Height="30"/>
                                        <RowDefinition Height="30"/>
                                        <RowDefinition Height="80"/>
                                        <RowDefinition Height="30"/>
                                    </Grid.RowDefinitions>

                                    <!-- Front Label -->
                                    <Label Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Content="FRONT"
                                           HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                                    <!-- Front Left -->
                                    <Grid Grid.Row="1" Grid.Column="0">
                                        <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="-1" Maximum="1" Value="{Binding ShakeITSlipFL}" />
                                        <Label Content="{Binding ShakeITSlipFL, StringFormat='{}{0:F3}'}"
                                               FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Label Grid.Row="2" Grid.Column="0" Content="FL" HorizontalAlignment="Center" FontWeight="Bold"/>

                                    <!-- Front Right -->
                                    <Grid Grid.Row="1" Grid.Column="2">
                                        <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="-1" Maximum="1" Value="{Binding ShakeITSlipFR}" />
                                        <Label Content="{Binding ShakeITSlipFR, StringFormat='{}{0:F3}'}"
                                               FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Label Grid.Row="2" Grid.Column="2" Content="FR" HorizontalAlignment="Center" FontWeight="Bold"/>

                                    <!-- Rear Label -->
                                    <Label Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" Content="REAR"
                                           HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,20,0,5"/>

                                    <!-- Rear Left -->
                                    <Grid Grid.Row="4" Grid.Column="0">
                                        <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="-1" Maximum="1" Value="{Binding ShakeITSlipRL}" />
                                        <Label Content="{Binding ShakeITSlipRL, StringFormat='{}{0:F3}'}"
                                               FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Label Grid.Row="5" Grid.Column="0" Content="RL" HorizontalAlignment="Center" FontWeight="Bold"/>

                                    <!-- Rear Right -->
                                    <Grid Grid.Row="4" Grid.Column="2">
                                        <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="-1" Maximum="1" Value="{Binding ShakeITSlipRR}" />
                                        <Label Content="{Binding ShakeITSlipRR, StringFormat='{}{0:F3}'}"
                                               FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Label Grid.Row="5" Grid.Column="2" Content="RR" HorizontalAlignment="Center" FontWeight="Bold"/>
                                </Grid>
                            </StackPanel>

                            <!-- SEPARATOR -->
                            <Border Grid.Column="1" Width="2" Background="Gray" Margin="9,0"/>

                            <!-- RIGHT: Custom Calculated Slip -->
                            <StackPanel Grid.Column="2">
                                <Label Content="Custom Calculated Slip" HorizontalAlignment="Center" FontWeight="Bold" FontSize="16" Margin="0,0,0,10"/>

                                <Grid HorizontalAlignment="Center">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="40"/>
                                        <ColumnDefinition Width="120"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="80"/>
                                        <RowDefinition Height="30"/>
                                        <RowDefinition Height="30"/>
                                        <RowDefinition Height="80"/>
                                        <RowDefinition Height="30"/>
                                    </Grid.RowDefinitions>

                                    <!-- Front Label -->
                                    <Label Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Content="FRONT"
                                           HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                                    <!-- Front Left -->
                                    <Grid Grid.Row="1" Grid.Column="0">
                                        <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="-1" Maximum="1" Value="{Binding CustomSlipFL}" />
                                        <Label Content="{Binding CustomSlipFL, StringFormat='{}{0:F3}'}"
                                               FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Label Grid.Row="2" Grid.Column="0" Content="FL" HorizontalAlignment="Center" FontWeight="Bold"/>

                                    <!-- Front Right -->
                                    <Grid Grid.Row="1" Grid.Column="2">
                                        <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="-1" Maximum="1" Value="{Binding CustomSlipFR}" />
                                        <Label Content="{Binding CustomSlipFR, StringFormat='{}{0:F3}'}"
                                               FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Label Grid.Row="2" Grid.Column="2" Content="FR" HorizontalAlignment="Center" FontWeight="Bold"/>

                                    <!-- Rear Label -->
                                    <Label Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" Content="REAR"
                                           HorizontalAlignment="Center" FontWeight="Bold" FontSize="14" Margin="0,20,0,5"/>

                                    <!-- Rear Left -->
                                    <Grid Grid.Row="4" Grid.Column="0">
                                        <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="-1" Maximum="1" Value="{Binding CustomSlipRL}" />
                                        <Label Content="{Binding CustomSlipRL, StringFormat='{}{0:F3}'}"
                                               FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Label Grid.Row="5" Grid.Column="0" Content="RL" HorizontalAlignment="Center" FontWeight="Bold"/>

                                    <!-- Rear Right -->
                                    <Grid Grid.Row="4" Grid.Column="2">
                                        <ProgressBar Orientation="Vertical" Width="60" Height="80" Minimum="-1" Maximum="1" Value="{Binding CustomSlipRR}" />
                                        <Label Content="{Binding CustomSlipRR, StringFormat='{}{0:F3}'}"
                                               FontFamily="Consolas" FontSize="11" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Label Grid.Row="5" Grid.Column="2" Content="RR" HorizontalAlignment="Center" FontWeight="Bold"/>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </styles:SHSubSection>

                    <styles:SHSectionSeparator />

                    <!-- Status Section -->
                    <styles:SHSubSection Title="Plugin Status">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="30"/>
                            </Grid.RowDefinitions>

                            <Label Grid.Row="0" Grid.Column="0" FontWeight="Bold">ShakeIT Available:</Label>
                            <Label Grid.Row="0" Grid.Column="1" Content="{Binding ShakeITAvailable}" FontFamily="Consolas" FontSize="14"/>

                            <Label Grid.Row="1" Grid.Column="0" FontWeight="Bold">Current Car ID:</Label>
                            <Label Grid.Row="1" Grid.Column="1" Content="{Binding CurrentCarId}" FontFamily="Consolas" FontSize="14"/>
                        </Grid>
                    </styles:SHSubSection>

                </StackPanel>
            </styles:SHSection>
        </Grid>
    </ScrollViewer>
</UserControl>